<h1>Catalog Home!</h1>

<div id="enter_an_isbn">
  Enter an ISBN:
  <input name="isbn" id="search_input"></input>
  <button id="submit" type="submit" value="Submit">Submit</button>
</div>
<div id="content"></div>

<script>

$(document).ready(function() {
  $('button').click(function(){
    var isbn = $('input#search_input').val();
    var booksAPI = "https://www.googleapis.com/books/v1/volumes?q=isbn:" + isbn + "&key=AIzaSyCXUQDJUs1QWyf94HfZjacdbt7Q6rQr-Qc&";
    $('#content').empty();
    function handleResponse(response) {
          // for (var i = 0; i < response.items.length; i++) {
            $.each(response.items, function(i, item) {
              var item = response.items[i];
            // in production code, item.text should have the HTML entities escaped.
            document.getElementById("content").innerHTML += "<p>" + "<img src=" + item.volumeInfo.imageLinks.thumbnail +" /><br> " + item.volumeInfo.title + ": " + item.volumeInfo.subtitle + "<br> by " + item.volumeInfo.authors + "</p>";
          });
          };
          $.getJSON(booksAPI, handleResponse);
          $('input#search_input').val('');

        });
});
</script>

<%= link_to 'Log Out!', destroy_user_session_path, method: :delete %>
